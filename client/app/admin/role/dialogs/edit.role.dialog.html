<div class="modal-header">
  <button type="button" class="close" ng-click="cancel()">&times;</button>
  <h3>Edit role permissions</h3>
</div>
<form name="editRoleForm" ng-submit="save()" class="form" novalidate>
  <div class="modal-body clearfix">
    <div class="form-group">
      <label>Name</label>
      <input ng-model="role.name">
    </div>
    <h4>Permissions <button type="button" class="btn btn-primary btn-xs" ng-click="openPresetDialog()">Load from preset</button></h4>
    <div ng-repeat="(key, title) in resources">
      <h4>{{title}} <label ng-if="!permissions[key]"><input type="checkbox" class="checkbox-inline" ng-model="role[key]"></label></h4>
      <table class="table table-striped table-hover table-bordered" style="width: auto" ng-if="permissions[key]">
        <thead>
          <tr>
            <th>Key</th>
            <th style="width: 20%" class="text-center">View</th>
            <th style="width: 20%" class="text-center">Create/Update</th>
            <th style="width: 20%" class="text-center">Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="(subkey, permission) in permissions[key]">
            <td>{{permission.title}}</td>
            <td class="text-center"><input type="checkbox" class="checkbox-inline" ng-model="role[key + '.' + subkey].view" ng-if="permission.view"></td>
            <td class="text-center"><input type="checkbox" class="checkbox-inline" ng-model="role[key + '.' + subkey].update" ng-if="permission.update"></td>
            <td class="text-center"><input type="checkbox" class="checkbox-inline" ng-model="role[key + '.' + subkey].delete" ng-if="permission.delete"></td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-success">Save</button>
    <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button>
  </div>
</form>

